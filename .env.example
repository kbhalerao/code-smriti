# Couchbase Configuration
COUCHBASE_USERNAME=Administrator
COUCHBASE_PASSWORD=  # REQUIRED: Generate with: openssl rand -base64 32 | tr -d '/+='
COUCHBASE_BUCKET=code_memory

# Embedding Configuration
# Backend: "local" (sentence-transformers, fast batch processing) or "ollama" (API)
# Recommended: "local" for ingestion (10-20x faster), keep Ollama for LLM tasks
EMBEDDING_BACKEND=local

# Ollama Configuration (for LLM tasks and alternative embedding)
# Use host.docker.internal to access from containers
OLLAMA_HOST=http://host.docker.internal:11434

# JWT Authentication
# Generate a secure secret with: openssl rand -hex 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# GitHub Integration
# Personal access token with repo read permissions
GITHUB_TOKEN=ghp_your_github_token_here
# Comma-separated list of repos to index (optional, can be set via API)
GITHUB_REPOS=owner/repo1,owner/repo2,owner/repo3

# Logging
LOG_LEVEL=INFO

# Optional: Rate limiting
RATE_LIMIT_PER_MINUTE=60

# Optional: Vector search configuration
VECTOR_SEARCH_TOP_K=10
SIMILARITY_THRESHOLD=0.7

# Repositories path (for native execution outside Docker)
# IMPORTANT: Store outside project directory to prevent recursion when ingesting code-smriti itself
# Default for Docker: /repos (mounted volume)
# Recommended for native: path outside project (e.g., /Users/username/codesmriti-repos)
REPOS_PATH=/repos

# Incremental Updates (default: true)
# When enabled, only re-process files that have changed (based on git commit hash)
# File-level granularity: changed files trigger atomic deletion + re-parse of all file chunks
ENABLE_INCREMENTAL_UPDATES=true
